<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Movimientos de Stock</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.min.css">
    <style>
        body { max-width: 900px; margin: 40px auto; }
        .movement-Entrada { color: #2e7d32; }
        .movement-Salida { color: #d32f2f; }
        .movement-Comentario { color: #f57c00; }
    </style>
</head>
<body>
    <h2>Historial de Movimientos de Stock</h2>
    <a href="{{ url_for('main.index') }}" class="button">Volver al Panel</a>
    <a href="{{ url_for('movements.add_movement') }}" class="button">Agregar Movimiento</a>
    
    <table>
        <thead>
            <tr>
                <th>Fecha</th>
                <th>Artículo</th>
                <th>Tipo</th>
                <th>Cambio de Cantidad</th>
                <th>Stock Después</th>
                <th>Unidad</th>
                <th>Notas</th>
            </tr>
        </thead>
        <tbody>
            {% for movement in movements %}
            <tr>
                <td>{{ movement['date'][:16] }}</td>
                <td>{{ movement['name'] }}</td>
                <td class="movement-{{ movement['movement_type'] }}">{{ movement['movement_type'].title() }}</td>
                <td class="movement-{{ movement['movement_type'] }}">
                    {% if movement['quantity_change'] > 0 %}+{% endif %}{{ movement['quantity_change'] }}
                </td>
                <td><strong>{{ movement['partial_stock'] }}</strong></td>
                <td>{{ movement['unit'] }}</td>
                <td>{{ movement['notes'] or '-' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>